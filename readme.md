gui 미로게임

* 개발 현황 & 과정 *
  게임은 전반적으로 파일을 읽거나 미로맵을 생성하는 것은 완성되었고 메뉴화면과 종료화면 게임화면을 모두 구현하였습니다.
  아이템, 파일생성 & 불러오기, 실시간 이동, 시간표시까지 전부 구현하였고
  보통 개발을 할때는 구글링과 clude 를 활용하였습니다.
  ai 로는 기초적인 툴을 완성하였습니다
  일단 역할을 부여하고 전체적인 코드를 완성하여 보여주는 것이 아닌 방법을 알려주고 그 코드에 대해 피드백을 해서 코드를 완성해 나갔습니다
  무슨 기술을 쓸지나 아니면 어떤 방향으로 개선하고 충돌이 안날지를 회의를 하는 것처럼 정리를 한 뒤 추천받은 기술을 활용해서 개발을 완성했습니다.

대표적으로 gui와 실시간 이동을 구현하는데 추천받은 swing과 Timer를 활용하여 제가 코드를 짜면 ai에게 평가를 받았습니다.
과정에서 ai에게 질문과 체크리스트를 점검하며 제가 이해하고 있는지 알아나갔습니다.

=================================================================================================================================================

* 개발시 고려한 점 *
  일단 저는 처음에는 웹쪽으로 방향을 생각하고 있었습니다. 하지만 웹으로 하자니 여러가지 문제가 생기고 또한 로직이 너무 복잡해지는 단점이 생겼습니다.
  이 단점을 해결하기 위해 gui를 생각하고 개발을 하였습니다.
  일단 가장 중요하게 본 포인트는 간단하고 직관적인 로직입니다.
  로직이 복잡해지고 많아지면 오류를 수정할 때 너무 많은 함수를 들려야하기에 최대한 직관적으로 함수내에서 처리할 수 있는건 모두 그 안에서 처리하였습니다.

=================================================================================================================================================

* 개발 과정에서 어려웠던 점 *
  --실시간 움직임 구현
  일단 비동기식으로 처리하는 것이 생각보다 어려웠으며 이것을 실시간으로 상대의 움직임과 함께 표시하는 것이 생각보다 큰 과제였습니다.
  또한 플레이어와 ai의 시야를 동시의 공유하거나 아이템으로 시야를 넓게 표현하기까지 많은 시도가 있었습니다.

일단 비동기식으로 처리하는 것은 Timer를 사용하여 자바스크립트의 인터벌처럼 사용하여 해결하고 매번 이동을 한뒤에 repaint()함수를 사용하여 게임패널을
초기화하여서 해결하였습니다.

--아이템 기능구현
아이템을 구현하기 위해 일단 activeItem()을 쓰는 경우 아이템을 누군가 먹었을 때 두 플레이어의 시야가 모두 밝아지는 버그가 있었습니다.
현재는 ai와 플레이어1의 타이머와 함수에 player의 번호를 받아 해당 번호의 플레이어에게만 시야를 밝게 하도록 조정을 하였습니다.

--제네레이터 + Ai 탐색
제네레이터는 제가 만든게 아닌 이전에 있던 코드를 그대로 저의 코드에 맞춰서 변형하였습니다.
하지만 여러가지 문제가 생겼습니다. 맵이 10에서 15정도로 작은 사이즈일때 미로가 제대로 형성이 안되고 도착지점이 근처에 있는 문제가 생긴 것입니다
이 경우는 그저 제네레이터의 운이기 떄문에 고질적인 문제로 아직까지는 방법을 모색하고 있습니다.
제네레이터가 맵을 잘못 만들 경우 벽이나 길을 기준으로 탐색하는 알고리즘은 오히려 독이 됩니다. 그렇기에 그저 랜덤한 방향으로 한칸씩 전진하는 ai를 채택하였습니다.

* 최종 점검 및 문제 *
  일단 코드를 짜면서 디테일이나 사소한 부분들이 꽤나 부족하였습니다.
  특히 제네레이터와 ai 상대를 만들면서 이 두가지가 앞선 제네레이터 문제로 남은 한쪽도 동작이 수월하지 않았기에 꽤나 아쉬웠습니다.
  ai도 원래는 알고리즘을 이용하려 했으나 이같은 오점이 발견되면서 급하게 랜덤방향으로 움직이는 로직으로 수정하였습니다.
  또한 gui를 테스트하면서 미로가 너무 커지니 고정위치에 있는 상태창이 겹치는 문제가 발생하였습니다.
  아무래도 아직은 배울게 많이 남은 아쉬움이 있는 첫 과제였습니다.

=================================================================================================================================================
* 주요로직 *
- 플레이어()
  플레이어 클레스는 딱히 로직 없이 간단하게 값을 활용하고 검사할 수 있게 직관적으로 값을 머금고만 있는 클레스로 설계하였습니다.
  -> getter와 setter만 존재 + 기본생성자

-게임 프레임 & 게임 패널(MenuScreen,endScreen)
* 게임 UI*
  미로와 값들을 표시해주는 클레스
  MazeGame 클래스안에 같이 존재하는 클래스로 JPrame 과 Jpanel을 상속받은 gui 로직을 담당 및 내부 알고리즘을 담고있음
  원래는 AI와 기존 플레이어의 클래스를 나누려 하였지만 만약 그렇다면 전 로직을 수정하고 테스트해야 하기에 최대한 직관적으로
  플레이어 넘버로 구분 짓고 함수로 Aimove를 통해 플레이어2만 조종하고
  일단 GUI를 구현하기 위해 JPRAME과 JPANE을 이용하여 ADD하고 변하는 값이나 변한 값은 repaint()를 이용하여 새로고침
  또한 모든 gui 창을 두가지 클레스를 한 자바파일 안에서 선언하고 프레임에 패널을 add()하는 방식으로 구현하였습니다.

* 이동 도착 밑 아이템 검사 *
  플레이어는 키보드를 통해 직접 조종 방향키+ qwer로 조종가능
  handleKeyPress에서 미리 각 키에대한 이벤트 지정w
  addKeyListener를 통해 선언하여 사용(in panel)
  각 키에 대해 인덱스 2차원 배열 특성을 활용하여 + & - 로 일단 newCol, newRow라는 변수에 담은 뒤 검사 함수를 이용하여 도착인지 아이템칸 인지 각각 확인 뒤
  플레이어의 인덱스 값을 setter로 수정 후 미로 맵 배열에서 새로운 칸을 플레이어로 변경 및 이전 칸은 길로 변경(자연스럽게 아이템을 먹은 것처럼 보이기도 하여 좋았습니다.)
  도착할 경우 플레이어는 사라지고 ai만 움직임

* 안개 시스템 *
  또한 안개시스템을 위해 플레이어가 가지고 있느 range범위만 보여주는 isInFogRange함수 존재
  2차원 배열인 매즈를 일일히 순회하면서 플레이어 주변 3*3칸 또는 5x5칸 인지 검사하여 boolean 타입을 반환하여 표시해줌
* ai플레이어(플레이어2) *
  ai플레이어는 원래는 미로맵이 온전하다는 가정하에 너비우선탐색 같은 알고리즘을 넣으려 하였으나 현재 제네레이터가 문제가 많기에 aimove는 단순히 랜덤으로 이동하고
  실시간으로 이동하는 비동기만 구현한 상태입니다


- 미로 맵 관련 2가지 방식(파일로드+ 미로 생성)
* 파일 로드 *
  파일 로드는 게임이 시작할 때 '파일을 읽어서 시작' 버튼을 누르고 파일 경로를 입력하여 읽어오는 방식입니다.
  문자열로 저장되어 있는 문자들을 line.charAt(j)으로 char로 만들고 '0'을 뺴고 숫자형으로 다시 저장하는 방식을 사용하였습니다.
  그 뒤에는 2차원 배열을 new MazeGame(maze); 로 넘겨줘서 미로맵을 시작해주었습니다.
* 미로 생성 *
  게임을 만들면서 끝까지 해결하지 못한 과제입니다.
  제네레이터가 제대로 작동을 하지만 너무 확률이라 제대로된 미로를 만들지 못하는 상황이 발생하였습니다.
  간단한 알고리즘으로 미로를 만들고 파일로드와 동일하게 new MazeGame(maze);로 2차원 배열을 넘겨주어 게임을 시작합니다.

미로 찾기 확장팩

* 과제 2. 맵 생성 규칙 강화(V)
* -> 맵 생성을 할 때 0,0 인덱스에서부터 dfs 방식으로 도착지까지 길로 바꾸며 이동
  * 인터넷에서 dfs 알고리즘 깃을 참고하여 만든 다음에 아이템,함정,도착지점,시작지점 등을 배치하는 함수를 만들어서 활용하였습니다.
* 과제 3. 아이템 및 함정 추가 (V)
  * 움직이지 못하는 함정 추가 - 기존에 도착지점에 도착했을 때 키를 무시하는것과 시야를 밣히는 로직에서 영감을 받아서 선택했습니다.
    * 키를 입력받고 움직이는 것은 초반에 프레임에 키헨들러를 선언해서 키를 누르는 이벤트가 발생하면 키헨들러 라는 함수로 넘기고 값을 처리하기 떄문에 트랩이 켜져있을 떄는 그냥 리턴을 해서 
    * 아무 동작도 못하는 방식으로 구현함
    * ai의 경우 현재도 구현 중 -> timer를 아이템처럼 if문을 두개 써서 잠깐 moveAi라는 함수의 호출을 멈추는 식으로 구현 예정

  *
* 과제 4. 동적 시야 (횃불) 시스템(V)
  * 원래도 구현되어 있었지만 과제 목록 중에 눈에 띄어서 적어봤습니다.
  * 원래는 플레이어 주변 한칸인지 검사하는 함수를 만든 뒤  패널에서 if 문으로 false는 회색바탕의 "?" 글자를 지닌 셀로 표시하고 나머지는 안에 있는 값에 따라 표시(switch)
  * 구현할 때는 원래 "1"이었던 부분을 그냥 range라는 함수로 1칸인지 2칸인지 저장하고 함수로 아이템이 켜지면 range = 2로 변경하여 구현하였습니다.


* 과제 5. 리플레이(Replay) 시스템(텍스트 파일 형태로 특정디렉토리에 존재하다 볼 수 있게 표시)
  * 리플레이는 맥북도 산 기념으로 맥북에서 큐를 활용하여 구현할 계획입니다.
  * 플레이어와 AI가 움직일 때 각각 큐에 움직임을 넣어서 마지막에 리플레이를 보기를 선택하면 각각 두개의 gui나 하나의 gui로 표시할 예정입니다.
  * 또한 그 다음단계는 택스트파일로 저장했다 목록처럼 표시해서 볼 수 있도록 하는 겁니다.
*
(스트링버퍼에 움직일 때 방향 or index넣고 텍스트파일을 만들고
그리고 텍스트 파일 인식해서 리스트 처럼 gui보여주기, 텍스트 파일 읽어서 큐에 넣고 리플레이 테스트) --> 현재 다른기기에서 구현 중입니다. 금방 틀만 잡고 업데이트하겠습니다!
//2026-01-26 10:48

플레이어는 방향키로 움직이면 방향키이모지로 버퍼에 저장
ai는 방향에 따라 case문을 돌려서 방향에 따른 이모지로 저장
텍스트 파일로 생성까지 확인
끝나면 0을 넣기

남은 것: -> 리플레이 스크린(현재 진행 중),텍스트파일 읽어서 리플레이

추가적인 것(디자인) : 리플레이 목록을 리스트처럼 보이도록 조정
//2026-01-27 6:16

리플레이 텍스트파일 구성

  첫번쨰 숫자 : 미로사이즈
  두번쨰 숫자s : 미로구성 e가 나오면 끝

  새번째 숫자s : 플레이어 움직임 방향 0이 나오면 끝
  네번째 숫자s : ai 움직임 방향 0이 나오면 끝

  다섯번쨰 숫자 : 플레이어 종료시간
  여섯번쨰 숫자 : ai 종료시간

  2026-02-04
  - 현재 리플레이까지 완성되었으면 충돌방지나 여러 문제점은 이제부터 수정할 예정입니다.
파일 이름과 뒤의 확장자를 상수로 저장하고 중간 카운트는 while문과 Files.existe()문으로 있는지 검사하고 있으면 숫자를 늘려서 없으면 생성 

꽤나 오랫동안 커밋이 없었지만 혅현재 여러가지 시도를 하는 과정과 산업기사를 준비하는 과정에서 조금 소홀히 커밋한거 같습니다.
지금 현재 원래의 문제였던 UI문제가 꽤나 힘든 문제네요.
기능은 아마 이번 리플레이 단점인 시간과 일치하지 않은 채 동일하게 움직인다는 단점을 해결하기 위해
타임스탬프를 만드는 중에 있습니다.
아마 타임스탬프가 생기면 리플레이를 한층 업그레이드 할 수 있을거 같습니다.

또한 가능하다면 제 미적감각 안에서 좀더 게임같이 디자인을 해볼 생각입니다.

다음 구현 순서 -> UI문제(보류), 타임스탬프,디자인,
기존에 자잘한 버그들 수정(AI와 위치값이 겹칠 때 리플레이에서 발생하는 문제) 
-> 한두번은 상관이 없지만 광클을 할때 발생하는 버그
2026-02-11



무브만 넣고 일단 테스트
함정이랑 다른건 나중에 구현
